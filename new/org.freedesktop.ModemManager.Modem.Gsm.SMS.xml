<?xml version="1.0" encoding="UTF-8" ?>

<node name="/" xmlns:tp="http://telepathy.freedesktop.org/wiki/DbusSpec#extensions-v0">
  <interface name="org.freedesktop.ModemManager1.Modem.SMS">

    <!-- METHODS -->

    <method name="Delete">
      <tp:docstring>
	Delete an SMS message.
      </tp:docstring>
      <annotation name="org.freedesktop.DBus.GLib.Async" value=""/>
      <annotation name="org.freedesktop.DBus.GLib.CSymbol" value="impl_gsm_modem_sms_delete"/>
      <arg name="index" type="u" direction="in">
	<tp:docstring>
	  The index of the SMS.
	</tp:docstring>
      </arg>
    </method>

    <method name="Get">
      <tp:docstring>
	Retrieve an SMS from the SIM card.
      </tp:docstring>
      <annotation name="org.freedesktop.DBus.GLib.Async" value=""/>
      <annotation name="org.freedesktop.DBus.GLib.CSymbol" value="impl_gsm_modem_sms_get"/>
      <arg name="index" type="u" direction="in">
	<tp:docstring>
	  The index of the SMS.
	</tp:docstring>
      </arg>
      <arg name="sms" type="a{sv}" direction="out">
        <tp:docstring>
          A dictionary containing SMS properties of the SMS specified by the given index.  This dictionary may contain the following key/value pairs:

          number   : string - Phone number (mandatory)
          text     : string - SMS text (mandatory)
          smsc     : string - SMS service center number (optional)
          validity : uint (0..255) - Specifies when the SMS expires in SMSC (optional)
          class    : uint (0..3) - Message importance and location (optional)
          completed: boolean - Whether all message parts have been received or not (optional)
          index    : uint - Index of message (for Get and Delete) (optional)
        </tp:docstring>
      </arg>
    </method>

    <method name="List">
      <tp:docstring>
        Retrieve all SMS messages.
      </tp:docstring>
      <annotation name="org.freedesktop.DBus.GLib.Async" value=""/>
      <annotation name="org.freedesktop.DBus.GLib.CSymbol" value="impl_gsm_modem_sms_list"/>
      <arg name="result" type="aa{sv}" direction="out">
        <tp:docstring>
          An array of dictionaries, each dictionary representing an SMS message.
          Each dictionary contains key/value pairs as described by the Get
          method.
        </tp:docstring>
      </arg>
    </method>

    <method name="Send">
      <annotation name="org.freedesktop.DBus.GLib.Async" value=""/>
      <annotation name="org.freedesktop.DBus.GLib.CSymbol" value="impl_gsm_modem_sms_send"/>
      <arg name="properties" type="a{sv}" direction="in">
	<tp:docstring>
	  SMS properties to save with the following key values:

	  number   : string - Phone number (mandatory)
	  text     : string - SMS text (mandatory)
	  smsc     : string - SMS service center number (optional)
	  validity : uint (0..255) - Specifies when the SMS expires in SMSC (optional)
	  class    : uint (0..3) - Message importance and location (optional)
	</tp:docstring>
      </arg>
      <arg name="result" type="au" direction="out"/>
    </method>

    <!-- SIGNALS -->

    <signal name="SmsReceived">
      <tp:docstring>
        Emitted when any part of a new SMS has been received (but not for
        subsequent parts, if any).  Not all parts may have been received and the
        message may not be complete; if it is, the 'complete' argument will be
        TRUE.
      </tp:docstring>
      <arg name="index" type="u">
        <tp:docstring>
          Index of the new SMS.
        </tp:docstring>
      </arg>
      <arg name="complete" type="b">
        <tp:docstring>
          TRUE if all message parts have been received, otherwise FALSE.
        </tp:docstring>
      </arg>
    </signal>

    <signal name="Completed">
      <tp:docstring>
        Emitted when the complete-ness status of an SMS message changes. An SMS
        may not necessarily be complete when the first part is received; this
        signal will be emitted when all parts have been received, even for
        single-part messages.
      </tp:docstring>
      <arg name="index" type="u">
        <tp:docstring>
          The index of the SMS.
        </tp:docstring>
      </arg>
      <arg name="completed" type="b">
        <tp:docstring>
          TRUE if all message parts have been received, otherwise FALSE.
        </tp:docstring>
      </arg>
    </signal>

  </interface>
</node>
